define(["module"],function(L){var J,K,O,A,M,N=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],D=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,E=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,B="undefined"!=typeof location&&location.href,C=B&&location.protocol&&location.protocol.replace(/\:/,""),H=B&&location.hostname,I=B&&(location.port||void 0),F={},G=L.config&&L.config()||{};return J={version:"2.0.12",strip:function(Q){if(Q){Q=Q.replace(D,"");var P=Q.match(E);P&&(Q=P[1])}else{Q=""}return Q},jsEscape:function(P){return P.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:G.createXhr||function(){var S,Q,R;if("undefined"!=typeof XMLHttpRequest){return new XMLHttpRequest}if("undefined"!=typeof ActiveXObject){for(Q=0;3>Q;Q+=1){R=N[Q];try{S=new ActiveXObject(R)}catch(P){}if(S){N=[R];break}}}return S},parseName:function(U){var S,T,Q,R=!1,V=U.indexOf("."),P=0===U.indexOf("./")||0===U.indexOf("../");return -1!==V&&(!P||V>1)?(S=U.substring(0,V),T=U.substring(V+1,U.length)):S=U,Q=T||S,V=Q.indexOf("!"),-1!==V&&(R="strip"===Q.substring(V+1),Q=Q.substring(0,V),T?T=Q:S=Q),{moduleName:S,ext:T,strip:R}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(T,S,W,P){var U,V,Q,R=J.xdRegExp.exec(T);return R?(U=R[2],V=R[3],V=V.split(":"),Q=V[1],V=V[0],!(U&&U!==S||V&&V.toLowerCase()!==W.toLowerCase()||(Q||V)&&Q!==P)):!0},finishLoad:function(S,R,P,Q){P=R?J.strip(P):P,G.isBuild&&(F[S]=P),Q(P)},load:function(T,S,W,P){if(P&&P.isBuild&&!P.inlineText){return void W()}G.isBuild=P&&P.isBuild;var U=J.parseName(T),V=U.moduleName+(U.ext?"."+U.ext:""),Q=S.toUrl(V),R=G.useXhr||J.useXhr;return 0===Q.indexOf("empty:")?void W():void (!B||R(Q,C,H,I)?J.get(Q,function(X){J.finishLoad(T,U.strip,X,W)},function(X){W.error&&W.error(X)}):S([V],function(X){J.finishLoad(U.moduleName+"."+U.ext,U.strip,X,W)}))},write:function(S,R,P,Q){if(F.hasOwnProperty(R)){var T=J.jsEscape(F[R]);P.asModule(S+"!"+R,"define(function () { return '"+T+"';});\n")}},writeFile:function(U,T,X,P,V){var W=J.parseName(T),R=W.ext?"."+W.ext:"",S=W.moduleName+R,Q=X.toUrl(W.moduleName+R)+".js";J.load(S,X,function(Z){var Y=function(b){return P(Q,b)};Y.asModule=function(d,c){return P.asModule(d,Q,c)},J.write(U,S,Y,V)},V)}},"node"===G.env||!G.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(K=require.nodeRequire("fs"),J.get=function(S,R,P){try{var Q=K.readFileSync(S,"utf8");0===Q.indexOf("\ufeff")&&(Q=Q.substring(1)),R(Q)}catch(T){P&&P(T)}}):"xhr"===G.env||!G.env&&J.createXhr()?J.get=function(T,S,Q,R){var U,P=J.createXhr();if(P.open("GET",T,!0),R){for(U in R){R.hasOwnProperty(U)&&P.setRequestHeader(U.toLowerCase(),R[U])}}G.onXhr&&G.onXhr(P,T),P.onreadystatechange=function(W){var V,X;4===P.readyState&&(V=P.status||0,V>399&&600>V?(X=new Error(T+" HTTP status: "+V),X.xhr=P,Q&&Q(X)):S(P.responseText),G.onXhrComplete&&G.onXhrComplete(P,T))},P.send(null)}:"rhino"===G.env||!G.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?J.get=function(U,S){var T,X,P="utf-8",V=new java.io.File(U),W=java.lang.System.getProperty("line.separator"),Q=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(V),P)),R="";try{for(T=new java.lang.StringBuffer,X=Q.readLine(),X&&X.length()&&65279===X.charAt(0)&&(X=X.substring(1)),null!==X&&T.append(X);null!==(X=Q.readLine());){T.append(W),T.append(X)}R=String(T.toString())}finally{Q.close()}S(R)}:("xpconnect"===G.env||!G.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(O=Components.classes,A=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),M="@mozilla.org/windows-registry-key;1" in O,J.get=function(U,S){var T,P,Q,R={};M&&(U=U.replace(/\//g,"\\")),Q=new FileUtils.File(U);try{T=O["@mozilla.org/network/file-input-stream;1"].createInstance(A.nsIFileInputStream),T.init(Q,1,0,!1),P=O["@mozilla.org/intl/converter-input-stream;1"].createInstance(A.nsIConverterInputStream),P.init(T,"utf-8",T.available(),A.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),P.readString(T.available(),R),P.close(),T.close(),S(R.value)}catch(V){throw new Error((Q&&Q.path||"")+": "+V)}}),J});